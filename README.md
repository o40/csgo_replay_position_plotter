# csgo_replay_position_plotter

The readme is poor and requires some knowledge of the user on how to build golang code, and run python scripts.

# Installation instructions

You need to clone the repo, and for building the goland code you need to get the demoinfocs-golang code from here:

```
go get github.com/markus-wa/demoinfocs-golang
```

To be able to plot on anything not black you need to extract the radar images yourself.
The radar files are located at:
"Steam\SteamApps\common\Counter-Strike Global Offensive\csgo\resource\overviews\de_cache_radar.dds"

You also need to install python and matplotlib:
```
python -m pip install -U pip
python -m pip install -U matplotlib
```

To be able to save the plots as video I recomment ffmpeg: https://www.ffmpeg.org/

# Usage

## Parsing

Use the "dumpdemodata" executable to output all position data from the played round to csv files. For example:
```
./dumpdemodata.exe -demo=replays/g2-vs-gambit-m2-ancient.dem -csv=g2-vs-gambit-m2-ancient
```

Then use "extractrounddata.py" to scan the csv folder for output generated by dumpdemodata, and to reformat it to something that the position plotter will like.

```
py -3 extractrounddata.py > csv_contaning_all_data_from_the_csv_folder.csv
```

## Plotting

See help from posplotter.py for details.

Example plot on de_cache showing the full map at 5 seconds (not outputting to image files)
`python posplotter.py --map de_cache --input csv/astralis-vs-faze-m1-cache.csv --show --full --start 5 --stop 6`

Example plot on de_cache generating images for server ticks between 5 and 6 seconds, zoomed in. The zoom is currently fixed in source code. This could be extended to be parameterized.
`python posplotter.py --map de_cache --input csv/astralis-vs-faze-m1-cache.csv --start 5 --stop 6`

The image files will end up in the "plots" folder (in a subfolder with date-time name).

## Generating video

Change to folder containing the images and run the following command:
`ffmpeg.exe -i %05d.png -c:v libx264 -vf fps=30 -pix_fmt yuv420p -vf "scale=trunc(iw/2)*2:trunc(ih/2)*2" video.mp4`

# Contact

If you want to collaborate on developing more interesting tools or have some interesting ideas on what to do with this tool, contact me on:

https://steamcommunity.com/id/dlxDaniel/

(or find my email)
